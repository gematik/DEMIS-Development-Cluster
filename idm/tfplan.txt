module.endpoints.data.kubernetes_resources.istio_gateways_beta[0]: Reading...
data.kubernetes_namespace.mesh_namespace: Reading...
module.endpoints.data.kubernetes_resources.istio_gateways_stable[0]: Reading...
data.kubernetes_namespace.mesh_namespace: Read complete after 0s [id=mesh]
module.activate_maintenance_mode.terraform_data.update_services: Refreshing state... [id=a952ba29-37e3-f213-2bf3-7b4a3e148e7d]
module.activate_maintenance_mode.terraform_data.set_maintenance_mode: Refreshing state... [id=68da9f8f-4318-f5c4-ff69-5cfb37409b21]
module.demis_namespace.kubernetes_namespace_v1.this: Refreshing state... [id=idm]
kubernetes_secret.database_credentials[0]: Refreshing state... [id=idm/postgres-secret]
kubernetes_secret.keycloak_gematik_idp_public_key: Refreshing state... [id=idm/keycloak-gematik-idp-public-key]
kubernetes_secret.database_credentials[1]: Refreshing state... [id=idm/keycloak-database-secret]
helm_release.network_rules_istio: Refreshing state... [id=network-rules]
helm_release.authorization_policies_istio: Refreshing state... [id=authorization-policies]
module.persistent_volume_claims["postgres-volume-claim"].kubernetes_persistent_volume_claim_v1.this: Refreshing state... [id=idm/postgres-volume-claim]
module.persistent_volume_claims["cus-volume-claim"].kubernetes_persistent_volume_claim_v1.this: Refreshing state... [id=idm/cus-volume-claim]
module.persistent_volume_claims["redis-cus-volume-claim"].kubernetes_persistent_volume_claim_v1.this: Refreshing state... [id=idm/redis-cus-volume-claim]
kubernetes_secret.keycloak_admin_account: Refreshing state... [id=idm/keycloak-admin-password]
kubernetes_secret.pgbouncer_userlist: Refreshing state... [id=idm/pgbouncer-userlist-secret]
kubernetes_secret.keycloak_portal_secret: Refreshing state... [id=idm/keycloak-portal-secret]
kubernetes_secret.keycloak_cus_client_secret: Refreshing state... [id=idm/keycloak-cus-client-secret]
kubernetes_secret.redis_cus_acl: Refreshing state... [id=idm/redis-cus-acl]
kubernetes_secret.ldap_certificates: Refreshing state... [id=idm/ldap-certificates]
kubernetes_secret.redis_cus_reader_credentials: Refreshing state... [id=idm/redis-cus-reader-password]
kubernetes_secret.keycloak_truststore_file: Refreshing state... [id=idm/keycloak-truststore-file]
kubernetes_secret.postgresql_tls_certificates: Refreshing state... [id=idm/postgres-tls-secret]
kubernetes_secret.keycloak_truststore_password: Refreshing state... [id=idm/keycloak-truststore-password]
kubernetes_secret.redis_cus_writer_credentials: Refreshing state... [id=idm/redis-cus-writer-password]
module.pull_secrets["gematik-gcr-io-demis-ref-registry-reader"].kubernetes_secret_v1.this: Refreshing state... [id=idm/gematik-gcr-io-demis-ref-registry-reader]
module.idm_services.module.postgres[0].helm_release.chart["16.6.0"]: Refreshing state... [id=postgres-16.6.0]
module.idm_services.module.redis_cus[0].helm_release.chart["7.4.2"]: Refreshing state... [id=redis-cus-7.4.2]
module.endpoints.data.kubernetes_resources.istio_gateways_stable[0]: Read complete after 7s
module.endpoints.data.kubernetes_resources.istio_gateways_beta[0]: Read complete after 8s
module.idm_services.module.redis_cus[0].helm_release.istio[0]: Refreshing state... [id=redis-cus-istio]
module.idm_services.module.postgres[0].helm_release.istio[0]: Refreshing state... [id=postgres-istio]
module.idm_services.module.pgbouncer[0].helm_release.chart["1.24.0"]: Refreshing state... [id=pgbouncer-1.24.0]
module.idm_services.module.pgbouncer[0].helm_release.istio[0]: Refreshing state... [id=pgbouncer-istio]
module.idm_services.module.keycloak[0].helm_release.chart["26.1.0"]: Refreshing state... [id=keycloak-26.1.0]
module.idm_services.module.keycloak[0].helm_release.istio[0]: Refreshing state... [id=keycloak-istio]
module.idm_services.module.keycloak_user_purger[0].helm_release.chart["1.1.2"]: Refreshing state... [id=keycloak-user-purger-1.1.2]
module.idm_services.module.certificate_update_service[0].helm_release.chart["1.8.1"]: Refreshing state... [id=certificate-update-service-1.8.1]
module.idm_services.module.keycloak_user_purger[0].helm_release.istio[0]: Refreshing state... [id=keycloak-user-purger-istio]
module.idm_services.module.certificate_update_service[0].helm_release.istio[0]: Refreshing state... [id=certificate-update-service-istio]
terraform_data.cus_manual_trigger: Refreshing state... [id=fb035ef8-ab71-028d-8e83-cca7639c07c4]
terraform_data.kup_manual_trigger: Refreshing state... [id=9d94407e-203f-6e23-26e5-ee1612b47ff5]
module.deactivate_maintenance_mode.terraform_data.update_services: Refreshing state... [id=2199d97e-350f-6ad7-b5e4-2cd367381cc4]
module.deactivate_maintenance_mode.terraform_data.set_maintenance_mode: Refreshing state... [id=b144a002-5632-a6a1-9334-f987ad5db1ba]

Note: Objects have changed outside of OpenTofu

OpenTofu detected the following changes made outside of OpenTofu since the
last "tofu apply" which may have affected this plan:

  # module.demis_namespace.kubernetes_namespace_v1.this has changed
  ~ resource "kubernetes_namespace_v1" "this" {
        id                               = "idm"
        # (1 unchanged attribute hidden)

      ~ metadata {
          ~ annotations      = {
              ~ "cattle.io/status"                          = jsonencode(
                  ~ {
                      ~ Conditions = [
                            {
                                LastUpdateTime = "2025-06-18T09:47:40Z"
                                Message        = ""
                                Status         = "True"
                                Type           = "ResourceQuotaInit"
                            },
                          + {
                              + LastUpdateTime = "2025-06-18T09:47:40Z"
                              + Message        = ""
                              + Status         = "True"
                              + Type           = "InitialRolesPopulated"
                            },
                        ]
                    }
                )
                # (1 unchanged element hidden)
            }
            name             = "idm"
            # (4 unchanged attributes hidden)
        }
    }


Unless you have made equivalent changes to your configuration, or ignored the
relevant attributes using ignore_changes, the following plan may include
actions to undo or respond to these changes.

─────────────────────────────────────────────────────────────────────────────

OpenTofu used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  ~ update in-place
-/+ destroy and then create replacement

OpenTofu will perform the following actions:

  # terraform_data.cus_manual_trigger must be replaced
-/+ resource "terraform_data" "cus_manual_trigger" {
      ~ id               = "fb035ef8-ab71-028d-8e83-cca7639c07c4" -> (known after apply)
      ~ triggers_replace = [
          - "2025-06-18T09:47:39Z",
          + (known after apply),
        ]
    }

  # terraform_data.kup_manual_trigger must be replaced
-/+ resource "terraform_data" "kup_manual_trigger" {
      ~ id               = "9d94407e-203f-6e23-26e5-ee1612b47ff5" -> (known after apply)
      ~ triggers_replace = [
          - "2025-06-18T09:47:39Z",
          + (known after apply),
        ]
    }

  # module.demis_namespace.kubernetes_namespace_v1.this will be updated in-place
  ~ resource "kubernetes_namespace_v1" "this" {
        id                               = "idm"
        # (1 unchanged attribute hidden)

      ~ metadata {
          ~ annotations      = {
              - "cattle.io/status"                          = jsonencode(
                    {
                      - Conditions = [
                          - {
                              - LastUpdateTime = "2025-06-18T09:47:40Z"
                              - Message        = ""
                              - Status         = "True"
                              - Type           = "ResourceQuotaInit"
                            },
                          - {
                              - LastUpdateTime = "2025-06-18T09:47:40Z"
                              - Message        = ""
                              - Status         = "True"
                              - Type           = "InitialRolesPopulated"
                            },
                        ]
                    }
                ) -> null
              - "lifecycle.cattle.io/create.namespace-auth" = "true" -> null
            }
            name             = "idm"
            # (4 unchanged attributes hidden)
        }
    }

Plan: 2 to add, 1 to change, 2 to destroy.

Warning: Value for undeclared variable

The root module does not declare a variable named "image_pull_policy" but a
value was found in file
"/home/jenkins/agent/workspace/aform_Deployment-Validation_main/environments/stage-adesso-ref-fra/idm/application-configuration.tfvars".
If you meant to use this value, add a "variable" block to the configuration.

To silence these warnings, use TF_VAR_... environment variables to provide
certain "global" settings to all configurations in your organization. To
reduce the verbosity of these warnings, use the -compact-warnings option.

─────────────────────────────────────────────────────────────────────────────

Note: You didn't use the -out option to save this plan, so OpenTofu can't
guarantee to take exactly these actions if you run "tofu apply" now.
